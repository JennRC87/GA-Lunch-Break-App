<%= render 'layouts/header' %>
<!-- Search bar for map -->
<input id="pac-input" class="controls" type="text" placeholder="Enter a location">
<!-- Map is rendered within this div, as per js -->
<div id="map"></div>

<p id="notice"><%= notice %></p>

<br>

<div class="new-place">
  <h2>Add New Place</h2>

  <%= form_for :place, method: 'create', url: {action: "create"} do |f| %>
    <%= label(:place, :name) %><br>
    <%= f.text_field :name %><br>
    <%= label(:place, :address) %><br>
    <%= f.text_field :address %><br>
    <%= label(:place, :latitude) %><br>
    <%= f.text_field :latitude %><br>
    <%= label(:place, :longitude) %><br>
    <%= f.text_field :longitude %><br>
    <br>
    <%= f.submit "Save This Place", class: "btn waves-effect waves-light red accent-4"%>
  <% end %>
</div>

<h2>Your Recommendations</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th colspan="3"></th>
      <th>Address</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @places.each do |place| %>
      <tr>
        <td><%= place.name %></td>
        <th colspan="3"></th>
        <td><%= place.address %></td>
        <th colspan="3"></th>
        <td><%= link_to 'Details', place %></td>
        <td><%= link_to 'Edit', edit_place_path(place) %></td>
        <td><%= link_to 'Delete', place, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= render 'layouts/footer' %>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBAchzUgA7nscKvpxt3v_YoC1pn5_55GcM&libraries=places&callback=initMap" async defer></script>
